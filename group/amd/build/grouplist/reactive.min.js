define ("core_group/grouplist/reactive",["exports","core_group/grouplist/component","core/utils","core/log"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.emitChange=a.default=void 0;d=function(a){return a&&a.__esModule?a:{default:a}}(d);function e(a,b){if(!(a instanceof b)){throw new TypeError("Cannot call a class as a function")}}function f(a,b){for(var c=0,d;c<b.length;c++){d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;if("value"in d)d.writable=!0;Object.defineProperty(a,d.key,d)}}function g(a,b,c){if(b)f(a.prototype,b);if(c)f(a,c);return a}var h=[],i=function(){function a(b){var c;e(this,a);this.maindefinition=b;this.definitions={};this.store=null!==(c=b.store)&&void 0!==c?c:{};this.componentnames=new Set([]);this.components=[]}g(a,[{key:"component",value:function component(a){this.definitions[a.name]=a;this.componentnames.add(a.name)}},{key:"render",value:function render(){this.maincomponent=(0,b.createComponent)(Object.assign(this.maindefinition,{name:"appmain",$reactive:this}),{});h.push(this.maincomponent)}},{key:"renderComponent",value:function renderComponent(a,c){var d=c.dataset.name;if(this.definitions[d]==void 0){throw new TypeError("Unkown component ".concat(d))}var e=Object.create(this.definitions[d]);e.$reactive=this;e.el=c;var f={};for(var k in e.props){var l=c.dataset[k];if(l!==void 0){var g;f[k]=null!==(g=a.getDataFromPath(l))&&void 0!==g?g:e.props[k]}else{f[k]=e.props[k]}}var i=(0,b.createComponent)(e,f),j=function(b){var d=c.dataset[b];if(d!==void 0){a.addBind(d,{update:function update(a){i.data[b]=a}})}};for(var m in e.props){j(m)}this.components.push(i);h.push(i);return i}},{key:"getComponents",value:function getComponents(){return this.components}},{key:"getStore",value:function getStore(){return this.store}},{key:"getMainComponent",value:function getMainComponent(){return this.maincomponent}}]);return a}();a.default=i;var j={},k=function(a,b){var c,d=a.split(".");b=null!==(c=b)&&void 0!==c?c:"update";l(d,b,j);n()};a.emitChange=k;var l=function(a,b,c){if(0==a.length){c.$action=b;return}var d=a.shift();if(c[d]===void 0){c[d]={}}return l(a,b,c[d])},m=function(){d.default.debug("Sending changes to the observers");var a=j;j={};Object.keys(a).forEach(function(b){h.forEach(function(c){if(c.data.$id==b){c.propagateChanges(a[b])}})})},n=(0,c.debounce)(m,10);return a.default});
//# sourceMappingURL=reactive.min.js.map
