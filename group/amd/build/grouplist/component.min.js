define ("core_group/grouplist/component",["exports","core/log","core/utils","core_group/grouplist/datahandler"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.createComponent=void 0;b=e(b);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}function g(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){g=function(a){return typeof a}}else{g=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return g(a)}function h(a){return l(a)||k(a)||j(a)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(a,b){if(!a)return;if("string"==typeof a)return m(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return m(a,b)}function k(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function l(a){if(Array.isArray(a))return m(a)}function m(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}var n=function(a,e){var f,g,h,i,j,k,l,m,n,p,s,w,z,C;if(e===void 0){e={}}if(a.data==void 0){a.data=function(){}}if("function"!=typeof a.data){throw new TypeError("Data should be a function")}if(a.name==void 0){throw new TypeError("All components require a name property")}if(a.$reactive==void 0){throw new TypeError("core_group/grouplist/reactive to register new components")}var D=(0,c.debounce)(null!==(f=a.refresh)&&void 0!==f?f:r,50),E=d.default.proxyComponent({name:a.name,$el:{},$reactive:a.$reactive,$store:null!==(g=a.store)&&void 0!==g?g:{},template:null!==(h=a.template)&&void 0!==h?h:"",domstructure:a.domstructure,render:null!==(i=a.render)&&void 0!==i?i:q,refresh:D,subcomponents:[],binds:{child:{},binds:new Set([])},onOutput:[],props:null!==(j=a.props)&&void 0!==j?j:{},data:Object.assign(e,null!==(k=a.data())&&void 0!==k?k:{}),computed:null!==(l=a.computed)&&void 0!==l?l:{},watchers:null!==(m=a.watchers)&&void 0!==m?m:{},methods:null!==(n=a.methods)&&void 0!==n?n:{},getDataFromPath:o,updateDataFromPath:L,propagateChanges:null!==(p=a.propagateChanges)&&void 0!==p?p:u,addBind:null!==(s=a.addBind)&&void 0!==s?s:v,processAllBinds:null!==(w=a.processAllBinds)&&void 0!==w?w:x,processBinds:null!==(z=a.processBinds)&&void 0!==z?z:y,mounted:null!==(C=a.mounted)&&void 0!==C?C:t,finishiOutput:A});E.$el=E.render();B(E);E.$el.component=E;Promise.resolve(E.mounted()).then(function(){E.finishiOutput();a.el.parentNode.replaceChild(E.$el,a.el);b.default.debug("Component ".concat(E.name," rendered"))});return E};a.createComponent=n;var o=function(a){a=d.default.getInternalPath(a,this.data);var b=a.split(".");return p(b,this.data)},p=function(a,b){if(0==a.length){return b}var c=a.shift();if(b[c]===void 0){return}return p(a,b[c])},q=function(){if(this.domstructure!==void 0){return this.domstructure}var a=document.createElement("template");if(""!=this.template){a.innerHTML=this.template.trim()}else{a.innerHTML="<div>Invalid component!</div>"}return a.content.firstChild},r=function(a,b){if(a==void 0){s(b)}},s=function(a){return a},t=function(){return!0},u=function(a){this.processBinds(a);this.subcomponents.forEach(function(b){b.propagateChanges(a)});return!0},v=function(a,b){a=d.default.getInternalPath(a,this.data);var c=a.split(".");w(c,this.binds,b);if(b.init!==void 0){this.onOutput.push(b.init)}},w=function(a,b,c){if(0==a.length){b.binds.add(c);return}var d=a.shift();if(b.child[d]===void 0){b.child[d]={child:{},binds:new Set([])}}return w(a,b.child[d],c)},x=function(){z(this.data,this.binds,this.data)},y=function(a){z(a,this.binds,this.data)},z=function(a,b,c){var d;if(a===void 0){return}var e=null!==(d=a.$action)&&void 0!==d?d:"update";h(b.binds).forEach(function(a){if(a[e]!==void 0){a[e](c)}});Object.keys(b.child).forEach(function(d){var e=b.child[d];if(c!==void 0){z(a[d],e,c[d])}else{z(a[d],e)}})},A=function(){this.onOutput.forEach(function(a){a()});this.processAllBinds()},B=function(a){F(a);G(a);C(a);D(a);K(a);E(a)},C=function(a){var b=a.$el.querySelectorAll("component");b.forEach(function(b){var c=a.$reactive.renderComponent(a,b);a.subcomponents.push(c)})},D=function(a){I(a);J(a)},E=function(a){N(a)},F=function(a){var b=a.$el.querySelectorAll("[data-if]");b.forEach(function(b){var c=b.dataset.if,d=b.style.display;a.addBind(c,{update:function update(a){if(H(a)){b.style.display="none"}else{b.style.display=d}}})})},G=function(a){var b=a.$el.querySelectorAll("[data-else]");b.forEach(function(b){var c=b.dataset.else,d=b.style.display;a.addBind(c,{update:function update(a){if(H(a)){b.style.display=d}else{b.style.display="none"}}})})},H=function(a){if(a===void 0){return!0}if("function"==typeof a){return!1}if(""==a||!1==a||0==a||null===a||0===a.length){return!0}if(a.valueOf!==void 0){var b=a.valueOf();if(""==b||!1==b||0==b||null===b||0===b.length){return!0}return!1}if("object"==g(a)){var c=!0;for(var d in a){c=null!==d}return c}return!1},I=function(a){var b=a.$el.querySelectorAll("[data-bind-text]");b.forEach(function(b){var c=b.dataset.bindText;a.addBind(c,{update:function update(a){if(b.innerText!=a){b.innerText=a}}})})},J=function(a){var b=a.$el.querySelectorAll("[data-bind-html]");b.forEach(function(b){var c=b.dataset.bindHtml;a.addBind(c,{update:function update(a){if(b.innerHTML!=a){b.innerHTML=a}}})})},K=function(a){var b=a.$el.querySelectorAll("input[data-model]");b.forEach(function(b){var c=b.dataset.model;a.addBind(c,{update:function update(a){if(b.value!=a&&document.activeElement!==b){b.value=a}}});b.addEventListener("keyup",function(){var d=a.getDataFromPath(c);if(b.value!=d.valueOf()){a.updateDataFromPath(c,b.value)}})})},L=function(a,b){a=d.default.getInternalPath(a,this.data);var c=a.split("."),e=c.pop(),f=p(c,this.data);f[e]=b},M=function(a,b,c){var d=document.createElement("template");a.parentNode.replaceChild(d,a);var e={};Object.assign(e,b.data);Object.assign(e,c);var f=n({el:d,name:Date.now(),props:b.props,domstructure:a,data:function(){return c},$reactive:b.$reactive,$store:b.$store,render:b.render,computed:b.computed,methods:b.methods,mounted:t});return f},N=function(a){var b=a.$el.querySelectorAll("[data-onclick]");b.forEach(function(b){var c=b.dataset.onclick,d=a.methods[c].bind(a);b.addEventListener("click",function(a){d(a)})})}});
//# sourceMappingURL=component.min.js.map
