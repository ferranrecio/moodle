/**
 * Module to manage content bank actions, such as delete or rename.
 *
 * @module     mod_data/presetactions
 * @copyright  2022 Amaia Anabitarte <amaia@moodle.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_data/presetactions",["jquery","core/ajax","core/notification","core/str","core/templates","core/url","core/modal_factory","core/modal_events"],(function($,Ajax,Notification,Str,Templates,Url,ModalFactory,ModalEvents){var ACTIONS_DELETE_PRESET='[data-action="deletepreset"]',Actions=function(){this.registerEvents()};return Actions.prototype.registerEvents=function(){$(ACTIONS_DELETE_PRESET).click((function(e){e.preventDefault();var presetname=$(this).data("presetname"),dataid=$(this).data("dataid"),strings=[{key:"deleteconfirm",component:"mod_data",param:{name:presetname}},{key:"deletewarning",component:"mod_data"},{key:"delete",component:"core"}],deleteButtonText="";Str.get_strings(strings).then((function(langStrings){var modalTitle=langStrings[0],modalBody=langStrings[1];return deleteButtonText=langStrings[2],ModalFactory.create({title:modalTitle,body:modalBody,type:ModalFactory.types.SAVE_CANCEL,large:!0})})).done((function(modal){modal.setSaveButtonText(deleteButtonText),modal.getRoot().on(ModalEvents.save,(function(){return function(dataid,presetname){var request={methodname:"mod_data_delete_saved_preset",args:{dataid:dataid,presetnames:{presetname:presetname}}},requestType="success";Ajax.call([request])[0].then((function(data){return data.result?"presetdeleted":(requestType="error","presetnotdeleted")})).done((function(message){var params={d:dataid};"success"==requestType?params.statusmsg=message:params.errormsg=message,window.location.href=Url.relativeUrl("mod/data/preset.php",params,!1)})).fail(Notification.exception)}(dataid,presetname)})),modal.getRoot().on(ModalEvents.hidden,(function(){modal.destroy()})),modal.show()})).catch(Notification.exception)}))},{init:function(){return new Actions}}}));

//# sourceMappingURL=presetactions.min.js.map