define("theme_boost/bootstrap/tooltip",["exports","theme_boost/popper","./util/index","./util/sanitizer","./dom/data","./dom/event-handler","./dom/manipulator","./dom/selector-engine","./base-component"],(function(_exports,Popper,_index,_sanitizer,_data,_eventHandler,_manipulator,_selectorEngine,_baseComponent){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,Popper=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Popper),_data=_interopRequireDefault(_data),_eventHandler=_interopRequireDefault(_eventHandler),_manipulator=_interopRequireDefault(_manipulator),_selectorEngine=_interopRequireDefault(_selectorEngine),_baseComponent=_interopRequireDefault(_baseComponent);const EVENT_KEY=".".concat("bs.tooltip"),BSCLS_PREFIX_REGEX=new RegExp("(^|\\s)".concat("bs-tooltip","\\S+"),"g"),DISALLOWED_ATTRIBUTES=new Set(["sanitize","allowList","sanitizeFn"]),DefaultType={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(array|string|function)",container:"(string|element|boolean)",fallbackPlacements:"array",boundary:"(string|element)",customClass:"(string|function)",sanitize:"boolean",sanitizeFn:"(null|function)",allowList:"object",popperConfig:"(null|object|function)"},AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:(0,_index.isRTL)()?"left":"right",BOTTOM:"bottom",LEFT:(0,_index.isRTL)()?"right":"left"},Default={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:[0,0],container:!1,fallbackPlacements:["top","right","bottom","left"],boundary:"clippingParents",customClass:"",sanitize:!0,sanitizeFn:null,allowList:_sanitizer.DefaultAllowlist,popperConfig:null},Event={HIDE:"hide".concat(EVENT_KEY),HIDDEN:"hidden".concat(EVENT_KEY),SHOW:"show".concat(EVENT_KEY),SHOWN:"shown".concat(EVENT_KEY),INSERTED:"inserted".concat(EVENT_KEY),CLICK:"click".concat(EVENT_KEY),FOCUSIN:"focusin".concat(EVENT_KEY),FOCUSOUT:"focusout".concat(EVENT_KEY),MOUSEENTER:"mouseenter".concat(EVENT_KEY),MOUSELEAVE:"mouseleave".concat(EVENT_KEY)};class Tooltip extends _baseComponent.default{constructor(element,config){if(void 0===Popper)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(element),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this._config=this._getConfig(config),this.tip=null,this._setListeners()}static get Default(){return Default}static get NAME(){return"tooltip"}static get Event(){return Event}static get DefaultType(){return DefaultType}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(event){if(this._isEnabled)if(event){const context=this._initializeOnDelegatedTarget(event);context._activeTrigger.click=!context._activeTrigger.click,context._isWithActiveTrigger()?context._enter(null,context):context._leave(null,context)}else{if(this.getTipElement().classList.contains("show"))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),_eventHandler.default.off(this._element.closest(".".concat("modal")),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.remove(),this._popper&&this._popper.destroy(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this.isWithContent()||!this._isEnabled)return;const showEvent=_eventHandler.default.trigger(this._element,this.constructor.Event.SHOW),shadowRoot=(0,_index.findShadowRoot)(this._element),isInTheDom=null===shadowRoot?this._element.ownerDocument.documentElement.contains(this._element):shadowRoot.contains(this._element);if(showEvent.defaultPrevented||!isInTheDom)return;const tip=this.getTipElement(),tipId=(0,_index.getUID)(this.constructor.NAME);tip.setAttribute("id",tipId),this._element.setAttribute("aria-describedby",tipId),this.setContent(),this._config.animation&&tip.classList.add("fade");const placement="function"==typeof this._config.placement?this._config.placement.call(this,tip,this._element):this._config.placement,attachment=this._getAttachment(placement);this._addAttachmentClass(attachment);const{container:container}=this._config;_data.default.set(tip,this.constructor.DATA_KEY,this),this._element.ownerDocument.documentElement.contains(this.tip)||(container.appendChild(tip),_eventHandler.default.trigger(this._element,this.constructor.Event.INSERTED)),this._popper?this._popper.update():this._popper=Popper.createPopper(this._element,tip,this._getPopperConfig(attachment)),tip.classList.add("show");const customClass="function"==typeof this._config.customClass?this._config.customClass():this._config.customClass;customClass&&tip.classList.add(...customClass.split(" ")),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((element=>{_eventHandler.default.on(element,"mouseover",_index.noop)}));const isAnimated=this.tip.classList.contains("fade");this._queueCallback((()=>{const prevHoverState=this._hoverState;this._hoverState=null,_eventHandler.default.trigger(this._element,this.constructor.Event.SHOWN),"out"===prevHoverState&&this._leave(null,this)}),this.tip,isAnimated)}hide(){if(!this._popper)return;const tip=this.getTipElement();if(_eventHandler.default.trigger(this._element,this.constructor.Event.HIDE).defaultPrevented)return;tip.classList.remove("show"),"ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((element=>_eventHandler.default.off(element,"mouseover",_index.noop))),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1;const isAnimated=this.tip.classList.contains("fade");this._queueCallback((()=>{this._isWithActiveTrigger()||("show"!==this._hoverState&&tip.remove(),this._cleanTipClass(),this._element.removeAttribute("aria-describedby"),_eventHandler.default.trigger(this._element,this.constructor.Event.HIDDEN),this._popper&&(this._popper.destroy(),this._popper=null))}),this.tip,isAnimated),this._hoverState=""}update(){null!==this._popper&&this._popper.update()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const element=document.createElement("div");return element.innerHTML=this._config.template,this.tip=element.children[0],this.tip}setContent(){const tip=this.getTipElement();this.setElementContent(_selectorEngine.default.findOne(".tooltip-inner",tip),this.getTitle()),tip.classList.remove("fade","show")}setElementContent(element,content){if(null!==element)return(0,_index.isElement)(content)?(content=(0,_index.getElement)(content),void(this._config.html?content.parentNode!==element&&(element.innerHTML="",element.appendChild(content)):element.textContent=content.textContent)):void(this._config.html?(this._config.sanitize&&(content=(0,_sanitizer.sanitizeHtml)(content,this._config.allowList,this._config.sanitizeFn)),element.innerHTML=content):element.textContent=content)}getTitle(){let title=this._element.getAttribute("data-bs-original-title");return title||(title="function"==typeof this._config.title?this._config.title.call(this._element):this._config.title),title}updateAttachment(attachment){return"right"===attachment?"end":"left"===attachment?"start":attachment}_initializeOnDelegatedTarget(event,context){const dataKey=this.constructor.DATA_KEY;return(context=context||_data.default.get(event.delegateTarget,dataKey))||(context=new this.constructor(event.delegateTarget,this._getDelegateConfig()),_data.default.set(event.delegateTarget,dataKey,context)),context}_getOffset(){const{offset:offset}=this._config;return"string"==typeof offset?offset.split(",").map((val=>Number.parseInt(val,10))):"function"==typeof offset?popperData=>offset(popperData,this._element):offset}_getPopperConfig(attachment){const defaultBsPopperConfig={placement:attachment,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:".".concat(this.constructor.NAME,"-arrow")}},{name:"onChange",enabled:!0,phase:"afterWrite",fn:data=>this._handlePopperPlacementChange(data)}],onFirstUpdate:data=>{data.options.placement!==data.placement&&this._handlePopperPlacementChange(data)}};return{...defaultBsPopperConfig,..."function"==typeof this._config.popperConfig?this._config.popperConfig(defaultBsPopperConfig):this._config.popperConfig}}_addAttachmentClass(attachment){this.getTipElement().classList.add("".concat("bs-tooltip","-").concat(this.updateAttachment(attachment)))}_getAttachment(placement){return AttachmentMap[placement.toUpperCase()]}_setListeners(){this._config.trigger.split(" ").forEach((trigger=>{if("click"===trigger)_eventHandler.default.on(this._element,this.constructor.Event.CLICK,this._config.selector,(event=>this.toggle(event)));else if("manual"!==trigger){const eventIn="hover"===trigger?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,eventOut="hover"===trigger?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;_eventHandler.default.on(this._element,eventIn,this._config.selector,(event=>this._enter(event))),_eventHandler.default.on(this._element,eventOut,this._config.selector,(event=>this._leave(event)))}})),this._hideModalHandler=()=>{this._element&&this.hide()},_eventHandler.default.on(this._element.closest(".".concat("modal")),"hide.bs.modal",this._hideModalHandler),this._config.selector?this._config={...this._config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const title=this._element.getAttribute("title"),originalTitleType=typeof this._element.getAttribute("data-bs-original-title");(title||"string"!==originalTitleType)&&(this._element.setAttribute("data-bs-original-title",title||""),!title||this._element.getAttribute("aria-label")||this._element.textContent||this._element.setAttribute("aria-label",title),this._element.setAttribute("title",""))}_enter(event,context){context=this._initializeOnDelegatedTarget(event,context),event&&(context._activeTrigger["focusin"===event.type?"focus":"hover"]=!0),context.getTipElement().classList.contains("show")||"show"===context._hoverState?context._hoverState="show":(clearTimeout(context._timeout),context._hoverState="show",context._config.delay&&context._config.delay.show?context._timeout=setTimeout((()=>{"show"===context._hoverState&&context.show()}),context._config.delay.show):context.show())}_leave(event,context){context=this._initializeOnDelegatedTarget(event,context),event&&(context._activeTrigger["focusout"===event.type?"focus":"hover"]=context._element.contains(event.relatedTarget)),context._isWithActiveTrigger()||(clearTimeout(context._timeout),context._hoverState="out",context._config.delay&&context._config.delay.hide?context._timeout=setTimeout((()=>{"out"===context._hoverState&&context.hide()}),context._config.delay.hide):context.hide())}_isWithActiveTrigger(){for(const trigger in this._activeTrigger)if(this._activeTrigger[trigger])return!0;return!1}_getConfig(config){const dataAttributes=_manipulator.default.getDataAttributes(this._element);return Object.keys(dataAttributes).forEach((dataAttr=>{DISALLOWED_ATTRIBUTES.has(dataAttr)&&delete dataAttributes[dataAttr]})),(config={...this.constructor.Default,...dataAttributes,..."object"==typeof config&&config?config:{}}).container=!1===config.container?document.body:(0,_index.getElement)(config.container),"number"==typeof config.delay&&(config.delay={show:config.delay,hide:config.delay}),"number"==typeof config.title&&(config.title=config.title.toString()),"number"==typeof config.content&&(config.content=config.content.toString()),(0,_index.typeCheckConfig)("tooltip",config,this.constructor.DefaultType),config.sanitize&&(config.template=(0,_sanitizer.sanitizeHtml)(config.template,config.allowList,config.sanitizeFn)),config}_getDelegateConfig(){const config={};if(this._config)for(const key in this._config)this.constructor.Default[key]!==this._config[key]&&(config[key]=this._config[key]);return config}_cleanTipClass(){const tip=this.getTipElement(),tabClass=tip.getAttribute("class").match(BSCLS_PREFIX_REGEX);null!==tabClass&&tabClass.length>0&&tabClass.map((token=>token.trim())).forEach((tClass=>tip.classList.remove(tClass)))}_handlePopperPlacementChange(popperData){const{state:state}=popperData;state&&(this.tip=state.elements.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(state.placement)))}static jQueryInterface(config){return this.each((function(){const data=Tooltip.getOrCreateInstance(this,config);if("string"==typeof config){if(void 0===data[config])throw new TypeError('No method named "'.concat(config,'"'));data[config]()}}))}}(0,_index.defineJQueryPlugin)(Tooltip);var _default=Tooltip;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=tooltip.min.js.map