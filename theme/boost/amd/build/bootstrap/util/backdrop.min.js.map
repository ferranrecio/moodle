{"version":3,"file":"backdrop.min.js","sources":["../../../src/bootstrap/util/backdrop.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.0.2): util/backdrop.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport { execute, executeAfterTransition, getElement, reflow, typeCheckConfig } from './index'\n\nconst Default = {\n  isVisible: true, // if false, we use the backdrop helper without adding any element to the dom\n  isAnimated: false,\n  rootElement: 'body', // give the choice to place backdrop under different elements\n  clickCallback: null\n}\n\nconst DefaultType = {\n  isVisible: 'boolean',\n  isAnimated: 'boolean',\n  rootElement: '(element|string)',\n  clickCallback: '(function|null)'\n}\nconst NAME = 'backdrop'\nconst CLASS_NAME_BACKDROP = 'modal-backdrop'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\n\nconst EVENT_MOUSEDOWN = `mousedown.bs.${NAME}`\n\nclass Backdrop {\n  constructor(config) {\n    this._config = this._getConfig(config)\n    this._isAppended = false\n    this._element = null\n  }\n\n  show(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._append()\n\n    if (this._config.isAnimated) {\n      reflow(this._getElement())\n    }\n\n    this._getElement().classList.add(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      execute(callback)\n    })\n  }\n\n  hide(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._getElement().classList.remove(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      this.dispose()\n      execute(callback)\n    })\n  }\n\n  // Private\n\n  _getElement() {\n    if (!this._element) {\n      const backdrop = document.createElement('div')\n      backdrop.className = CLASS_NAME_BACKDROP\n      if (this._config.isAnimated) {\n        backdrop.classList.add(CLASS_NAME_FADE)\n      }\n\n      this._element = backdrop\n    }\n\n    return this._element\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n    config.rootElement = getElement(config.rootElement)\n    typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _append() {\n    if (this._isAppended) {\n      return\n    }\n\n    this._config.rootElement.appendChild(this._getElement())\n\n    EventHandler.on(this._getElement(), EVENT_MOUSEDOWN, () => {\n      execute(this._config.clickCallback)\n    })\n\n    this._isAppended = true\n  }\n\n  dispose() {\n    if (!this._isAppended) {\n      return\n    }\n\n    EventHandler.off(this._element, EVENT_MOUSEDOWN)\n\n    this._element.remove()\n    this._isAppended = false\n  }\n\n  _emulateAnimation(callback) {\n    executeAfterTransition(callback, this._getElement(), this._config.isAnimated)\n  }\n}\n\nexport default Backdrop\n"],"names":["Default","isVisible","isAnimated","rootElement","clickCallback","DefaultType","EVENT_MOUSEDOWN","constructor","config","_config","this","_getConfig","_isAppended","_element","show","callback","_append","_getElement","classList","add","_emulateAnimation","hide","remove","dispose","backdrop","document","createElement","className","appendChild","on","off"],"mappings":"qSAUMA,QAAU,CACdC,WAAW,EACXC,YAAY,EACZC,YAAa,OACbC,cAAe,MAGXC,YAAc,CAClBJ,UAAW,UACXC,WAAY,UACZC,YAAa,mBACbC,cAAe,mBAOXE,uCALO,+BAQXC,YAAYC,aACLC,QAAUC,KAAKC,WAAWH,aAC1BI,aAAc,OACdC,SAAW,KAGlBC,KAAKC,UACEL,KAAKD,QAAQR,gBAKbe,UAEDN,KAAKD,QAAQP,8BACRQ,KAAKO,oBAGTA,cAAcC,UAAUC,IAvBT,aAyBfC,mBAAkB,wBACbL,iCAbAA,UAiBZM,KAAKN,UACEL,KAAKD,QAAQR,gBAKbgB,cAAcC,UAAUI,OApCT,aAsCfF,mBAAkB,UAChBG,6BACGR,iCARAA,UAcZE,kBACOP,KAAKG,SAAU,OACZW,SAAWC,SAASC,cAAc,OACxCF,SAASG,UAnDa,iBAoDlBjB,KAAKD,QAAQP,YACfsB,SAASN,UAAUC,IApDH,aAuDbN,SAAWW,gBAGXd,KAAKG,SAGdF,WAAWH,eACTA,OAAS,IACJR,WACmB,iBAAXQ,OAAsBA,OAAS,KAIrCL,aAAc,qBAAWK,OAAOL,wCAtE9B,WAuEaK,OAAQH,aACvBG,OAGTQ,UACMN,KAAKE,mBAIJH,QAAQN,YAAYyB,YAAYlB,KAAKO,qCAE7BY,GAAGnB,KAAKO,cAAeX,iBAAiB,wBAC3CI,KAAKD,QAAQL,uBAGlBQ,aAAc,GAGrBW,UACOb,KAAKE,oCAIGkB,IAAIpB,KAAKG,SAAUP,sBAE3BO,SAASS,cACTV,aAAc,GAGrBQ,kBAAkBL,4CACOA,SAAUL,KAAKO,cAAeP,KAAKD,QAAQP"}