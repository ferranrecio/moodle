define("theme_boost/bootstrap/carousel",["exports","./util/index","./dom/event-handler","./dom/manipulator","./dom/selector-engine","./base-component"],(function(_exports,_index,_eventHandler,_manipulator,_selectorEngine,_baseComponent){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_eventHandler=_interopRequireDefault(_eventHandler),_manipulator=_interopRequireDefault(_manipulator),_selectorEngine=_interopRequireDefault(_selectorEngine),_baseComponent=_interopRequireDefault(_baseComponent);const EVENT_KEY=".".concat("bs.carousel"),Default={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},DefaultType={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},ORDER_NEXT="next",ORDER_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",KEY_TO_DIRECTION={ArrowLeft:DIRECTION_RIGHT,ArrowRight:DIRECTION_LEFT},EVENT_SLIDE="slide".concat(EVENT_KEY),EVENT_SLID="slid".concat(EVENT_KEY),EVENT_KEYDOWN="keydown".concat(EVENT_KEY),EVENT_MOUSEENTER="mouseenter".concat(EVENT_KEY),EVENT_MOUSELEAVE="mouseleave".concat(EVENT_KEY),EVENT_TOUCHSTART="touchstart".concat(EVENT_KEY),EVENT_TOUCHMOVE="touchmove".concat(EVENT_KEY),EVENT_TOUCHEND="touchend".concat(EVENT_KEY),EVENT_POINTERDOWN="pointerdown".concat(EVENT_KEY),EVENT_POINTERUP="pointerup".concat(EVENT_KEY),EVENT_DRAG_START="dragstart".concat(EVENT_KEY),EVENT_LOAD_DATA_API="load".concat(EVENT_KEY).concat(".data-api"),EVENT_CLICK_DATA_API="click".concat(EVENT_KEY).concat(".data-api");class Carousel extends _baseComponent.default{constructor(element,config){super(element),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(config),this._indicatorsElement=_selectorEngine.default.findOne(".carousel-indicators",this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Default}static get NAME(){return"carousel"}next(){this._slide(ORDER_NEXT)}nextWhenVisible(){!document.hidden&&(0,_index.isVisible)(this._element)&&this.next()}prev(){this._slide(ORDER_PREV)}pause(event){event||(this._isPaused=!0),_selectorEngine.default.findOne(".carousel-item-next, .carousel-item-prev",this._element)&&((0,_index.triggerTransitionEnd)(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(event){event||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(index){this._activeElement=_selectorEngine.default.findOne(".active.carousel-item",this._element);const activeIndex=this._getItemIndex(this._activeElement);if(index>this._items.length-1||index<0)return;if(this._isSliding)return void _eventHandler.default.one(this._element,EVENT_SLID,(()=>this.to(index)));if(activeIndex===index)return this.pause(),void this.cycle();const order=index>activeIndex?ORDER_NEXT:ORDER_PREV;this._slide(order,this._items[index])}_getConfig(config){return config={...Default,..._manipulator.default.getDataAttributes(this._element),..."object"==typeof config?config:{}},(0,_index.typeCheckConfig)("carousel",config,DefaultType),config}_handleSwipe(){const absDeltax=Math.abs(this.touchDeltaX);if(absDeltax<=40)return;const direction=absDeltax/this.touchDeltaX;this.touchDeltaX=0,direction&&this._slide(direction>0?DIRECTION_RIGHT:DIRECTION_LEFT)}_addEventListeners(){this._config.keyboard&&_eventHandler.default.on(this._element,EVENT_KEYDOWN,(event=>this._keydown(event))),"hover"===this._config.pause&&(_eventHandler.default.on(this._element,EVENT_MOUSEENTER,(event=>this.pause(event))),_eventHandler.default.on(this._element,EVENT_MOUSELEAVE,(event=>this.cycle(event)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){const start=event=>{!this._pointerEvent||"pen"!==event.pointerType&&"touch"!==event.pointerType?this._pointerEvent||(this.touchStartX=event.touches[0].clientX):this.touchStartX=event.clientX},move=event=>{this.touchDeltaX=event.touches&&event.touches.length>1?0:event.touches[0].clientX-this.touchStartX},end=event=>{!this._pointerEvent||"pen"!==event.pointerType&&"touch"!==event.pointerType||(this.touchDeltaX=event.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((event=>this.cycle(event)),500+this._config.interval))};_selectorEngine.default.find(".carousel-item img",this._element).forEach((itemImg=>{_eventHandler.default.on(itemImg,EVENT_DRAG_START,(e=>e.preventDefault()))})),this._pointerEvent?(_eventHandler.default.on(this._element,EVENT_POINTERDOWN,(event=>start(event))),_eventHandler.default.on(this._element,EVENT_POINTERUP,(event=>end(event))),this._element.classList.add("pointer-event")):(_eventHandler.default.on(this._element,EVENT_TOUCHSTART,(event=>start(event))),_eventHandler.default.on(this._element,EVENT_TOUCHMOVE,(event=>move(event))),_eventHandler.default.on(this._element,EVENT_TOUCHEND,(event=>end(event))))}_keydown(event){if(/input|textarea/i.test(event.target.tagName))return;const direction=KEY_TO_DIRECTION[event.key];direction&&(event.preventDefault(),this._slide(direction))}_getItemIndex(element){return this._items=element&&element.parentNode?_selectorEngine.default.find(".carousel-item",element.parentNode):[],this._items.indexOf(element)}_getItemByOrder(order,activeElement){const isNext=order===ORDER_NEXT;return(0,_index.getNextActiveElement)(this._items,activeElement,isNext,this._config.wrap)}_triggerSlideEvent(relatedTarget,eventDirectionName){const targetIndex=this._getItemIndex(relatedTarget),fromIndex=this._getItemIndex(_selectorEngine.default.findOne(".active.carousel-item",this._element));return _eventHandler.default.trigger(this._element,EVENT_SLIDE,{relatedTarget:relatedTarget,direction:eventDirectionName,from:fromIndex,to:targetIndex})}_setActiveIndicatorElement(element){if(this._indicatorsElement){const activeIndicator=_selectorEngine.default.findOne(".active",this._indicatorsElement);activeIndicator.classList.remove("active"),activeIndicator.removeAttribute("aria-current");const indicators=_selectorEngine.default.find("[data-bs-target]",this._indicatorsElement);for(let i=0;i<indicators.length;i++)if(Number.parseInt(indicators[i].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(element)){indicators[i].classList.add("active"),indicators[i].setAttribute("aria-current","true");break}}}_updateInterval(){const element=this._activeElement||_selectorEngine.default.findOne(".active.carousel-item",this._element);if(!element)return;const elementInterval=Number.parseInt(element.getAttribute("data-bs-interval"),10);elementInterval?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=elementInterval):this._config.interval=this._config.defaultInterval||this._config.interval}_slide(directionOrOrder,element){const order=this._directionToOrder(directionOrOrder),activeElement=_selectorEngine.default.findOne(".active.carousel-item",this._element),activeElementIndex=this._getItemIndex(activeElement),nextElement=element||this._getItemByOrder(order,activeElement),nextElementIndex=this._getItemIndex(nextElement),isCycling=Boolean(this._interval),isNext=order===ORDER_NEXT,directionalClassName=isNext?"carousel-item-start":"carousel-item-end",orderClassName=isNext?"carousel-item-next":"carousel-item-prev",eventDirectionName=this._orderToDirection(order);if(nextElement&&nextElement.classList.contains("active"))return void(this._isSliding=!1);if(this._isSliding)return;if(this._triggerSlideEvent(nextElement,eventDirectionName).defaultPrevented)return;if(!activeElement||!nextElement)return;this._isSliding=!0,isCycling&&this.pause(),this._setActiveIndicatorElement(nextElement),this._activeElement=nextElement;const triggerSlidEvent=()=>{_eventHandler.default.trigger(this._element,EVENT_SLID,{relatedTarget:nextElement,direction:eventDirectionName,from:activeElementIndex,to:nextElementIndex})};if(this._element.classList.contains("slide")){nextElement.classList.add(orderClassName),(0,_index.reflow)(nextElement),activeElement.classList.add(directionalClassName),nextElement.classList.add(directionalClassName);const completeCallBack=()=>{nextElement.classList.remove(directionalClassName,orderClassName),nextElement.classList.add("active"),activeElement.classList.remove("active",orderClassName,directionalClassName),this._isSliding=!1,setTimeout(triggerSlidEvent,0)};this._queueCallback(completeCallBack,activeElement,!0)}else activeElement.classList.remove("active"),nextElement.classList.add("active"),this._isSliding=!1,triggerSlidEvent();isCycling&&this.cycle()}_directionToOrder(direction){return[DIRECTION_RIGHT,DIRECTION_LEFT].includes(direction)?(0,_index.isRTL)()?direction===DIRECTION_LEFT?ORDER_PREV:ORDER_NEXT:direction===DIRECTION_LEFT?ORDER_NEXT:ORDER_PREV:direction}_orderToDirection(order){return[ORDER_NEXT,ORDER_PREV].includes(order)?(0,_index.isRTL)()?order===ORDER_PREV?DIRECTION_LEFT:DIRECTION_RIGHT:order===ORDER_PREV?DIRECTION_RIGHT:DIRECTION_LEFT:order}static carouselInterface(element,config){const data=Carousel.getOrCreateInstance(element,config);let{_config:_config}=data;"object"==typeof config&&(_config={..._config,...config});const action="string"==typeof config?config:_config.slide;if("number"==typeof config)data.to(config);else if("string"==typeof action){if(void 0===data[action])throw new TypeError('No method named "'.concat(action,'"'));data[action]()}else _config.interval&&_config.ride&&(data.pause(),data.cycle())}static jQueryInterface(config){return this.each((function(){Carousel.carouselInterface(this,config)}))}static dataApiClickHandler(event){const target=(0,_index.getElementFromSelector)(this);if(!target||!target.classList.contains("carousel"))return;const config={..._manipulator.default.getDataAttributes(target),..._manipulator.default.getDataAttributes(this)},slideIndex=this.getAttribute("data-bs-slide-to");slideIndex&&(config.interval=!1),Carousel.carouselInterface(target,config),slideIndex&&Carousel.getInstance(target).to(slideIndex),event.preventDefault()}}_eventHandler.default.on(document,EVENT_CLICK_DATA_API,"[data-bs-slide], [data-bs-slide-to]",Carousel.dataApiClickHandler),_eventHandler.default.on(window,EVENT_LOAD_DATA_API,(()=>{const carousels=_selectorEngine.default.find('[data-bs-ride="carousel"]');for(let i=0,len=carousels.length;i<len;i++)Carousel.carouselInterface(carousels[i],Carousel.getInstance(carousels[i]))})),(0,_index.defineJQueryPlugin)(Carousel);var _default=Carousel;return _exports.default=_default,_exports.default}));

//# sourceMappingURL=carousel.min.js.map