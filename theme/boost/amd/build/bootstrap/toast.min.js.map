{"version":3,"file":"toast.min.js","sources":["../../src/bootstrap/toast.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.0.2): toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  reflow,\n  typeCheckConfig\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport BaseComponent from './base-component'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'toast'\nconst DATA_KEY = 'bs.toast'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEOVER = `mouseover${EVENT_KEY}`\nconst EVENT_MOUSEOUT = `mouseout${EVENT_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_FOCUSOUT = `focusout${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\n\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_HIDE = 'hide'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_SHOWING = 'showing'\n\nconst DefaultType = {\n  animation: 'boolean',\n  autohide: 'boolean',\n  delay: 'number'\n}\n\nconst Default = {\n  animation: true,\n  autohide: true,\n  delay: 5000\n}\n\nconst SELECTOR_DATA_DISMISS = '[data-bs-dismiss=\"toast\"]'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Toast extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._timeout = null\n    this._hasMouseInteraction = false\n    this._hasKeyboardInteraction = false\n    this._setListeners()\n  }\n\n  // Getters\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n\n  show() {\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW)\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._clearTimeout()\n\n    if (this._config.animation) {\n      this._element.classList.add(CLASS_NAME_FADE)\n    }\n\n    const complete = () => {\n      this._element.classList.remove(CLASS_NAME_SHOWING)\n      this._element.classList.add(CLASS_NAME_SHOW)\n\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n\n      this._maybeScheduleHide()\n    }\n\n    this._element.classList.remove(CLASS_NAME_HIDE)\n    reflow(this._element)\n    this._element.classList.add(CLASS_NAME_SHOWING)\n\n    this._queueCallback(complete, this._element, this._config.animation)\n  }\n\n  hide() {\n    if (!this._element.classList.contains(CLASS_NAME_SHOW)) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const complete = () => {\n      this._element.classList.add(CLASS_NAME_HIDE)\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n    this._queueCallback(complete, this._element, this._config.animation)\n  }\n\n  dispose() {\n    this._clearTimeout()\n\n    if (this._element.classList.contains(CLASS_NAME_SHOW)) {\n      this._element.classList.remove(CLASS_NAME_SHOW)\n    }\n\n    super.dispose()\n  }\n\n  // Private\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' && config ? config : {})\n    }\n\n    typeCheckConfig(NAME, config, this.constructor.DefaultType)\n\n    return config\n  }\n\n  _maybeScheduleHide() {\n    if (!this._config.autohide) {\n      return\n    }\n\n    if (this._hasMouseInteraction || this._hasKeyboardInteraction) {\n      return\n    }\n\n    this._timeout = setTimeout(() => {\n      this.hide()\n    }, this._config.delay)\n  }\n\n  _onInteraction(event, isInteracting) {\n    switch (event.type) {\n      case 'mouseover':\n      case 'mouseout':\n        this._hasMouseInteraction = isInteracting\n        break\n      case 'focusin':\n      case 'focusout':\n        this._hasKeyboardInteraction = isInteracting\n        break\n      default:\n        break\n    }\n\n    if (isInteracting) {\n      this._clearTimeout()\n      return\n    }\n\n    const nextElement = event.relatedTarget\n    if (this._element === nextElement || this._element.contains(nextElement)) {\n      return\n    }\n\n    this._maybeScheduleHide()\n  }\n\n  _setListeners() {\n    EventHandler.on(this._element, EVENT_CLICK_DISMISS, SELECTOR_DATA_DISMISS, () => this.hide())\n    EventHandler.on(this._element, EVENT_MOUSEOVER, event => this._onInteraction(event, true))\n    EventHandler.on(this._element, EVENT_MOUSEOUT, event => this._onInteraction(event, false))\n    EventHandler.on(this._element, EVENT_FOCUSIN, event => this._onInteraction(event, true))\n    EventHandler.on(this._element, EVENT_FOCUSOUT, event => this._onInteraction(event, false))\n  }\n\n  _clearTimeout() {\n    clearTimeout(this._timeout)\n    this._timeout = null\n  }\n\n  // Static\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Toast.getOrCreateInstance(this, config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](this)\n      }\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Toast to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Toast)\n\nexport default Toast\n"],"names":["EVENT_KEY","EVENT_CLICK_DISMISS","EVENT_MOUSEOVER","EVENT_MOUSEOUT","EVENT_FOCUSIN","EVENT_FOCUSOUT","EVENT_HIDE","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","DefaultType","animation","autohide","delay","Default","Toast","BaseComponent","constructor","element","config","_config","this","_getConfig","_timeout","_hasMouseInteraction","_hasKeyboardInteraction","_setListeners","NAME","show","EventHandler","trigger","_element","defaultPrevented","_clearTimeout","classList","add","remove","_queueCallback","_maybeScheduleHide","hide","contains","dispose","Manipulator","getDataAttributes","setTimeout","_onInteraction","event","isInteracting","type","nextElement","relatedTarget","on","clearTimeout","each","data","getOrCreateInstance","TypeError"],"mappings":"sgBAwBMA,qBADW,YAGXC,2CAAsCD,WACtCE,mCAA8BF,WAC9BG,iCAA4BH,WAC5BI,+BAA0BJ,WAC1BK,iCAA4BL,WAC5BM,yBAAoBN,WACpBO,6BAAwBP,WACxBQ,yBAAoBR,WACpBS,2BAAsBT,WAOtBU,YAAc,CAClBC,UAAW,UACXC,SAAU,UACVC,MAAO,UAGHC,QAAU,CACdH,WAAW,EACXC,UAAU,EACVC,MAAO,WAWHE,cAAcC,uBAClBC,YAAYC,QAASC,cACbD,cAEDE,QAAUC,KAAKC,WAAWH,aAC1BI,SAAW,UACXC,sBAAuB,OACvBC,yBAA0B,OAC1BC,gBAKIhB,gCACFA,YAGEI,4BACFA,QAGEa,wBA5DA,QAkEXC,UACoBC,sBAAaC,QAAQT,KAAKU,SAAUvB,YAExCwB,6BAITC,gBAEDZ,KAAKD,QAAQT,gBACVoB,SAASG,UAAUC,IA9DN,aA0EfJ,SAASG,UAAUE,OAzEJ,0BA0Ebf,KAAKU,eACPA,SAASG,UAAUC,IAzED,gBA2ElBE,gBAbY,UACVN,SAASG,UAAUE,OA/DH,gBAgEhBL,SAASG,UAAUC,IAjEN,8BAmELL,QAAQT,KAAKU,SAAUtB,kBAE/B6B,uBAOuBjB,KAAKU,SAAUV,KAAKD,QAAQT,WAG5D4B,WACOlB,KAAKU,SAASG,UAAUM,SAhFT,kBAoFFX,sBAAaC,QAAQT,KAAKU,SAAUzB,YAExC0B,6BASTD,SAASG,UAAUE,OA/FJ,aAgGfC,gBANY,UACVN,SAASG,UAAUC,IA5FN,8BA6FLL,QAAQT,KAAKU,SAAUxB,gBAIRc,KAAKU,SAAUV,KAAKD,QAAQT,WAG5D8B,eACOR,gBAEDZ,KAAKU,SAASG,UAAUM,SAtGR,cAuGbT,SAASG,UAAUE,OAvGN,cA0GdK,UAKRnB,WAAWH,eACTA,OAAS,IACJL,WACA4B,qBAAYC,kBAAkBtB,KAAKU,aAChB,iBAAXZ,QAAuBA,OAASA,OAAS,+BAnI7C,QAsIaA,OAAQE,KAAKJ,YAAYP,aAExCS,OAGTmB,qBACOjB,KAAKD,QAAQR,WAIdS,KAAKG,sBAAwBH,KAAKI,+BAIjCF,SAAWqB,YAAW,UACpBL,SACJlB,KAAKD,QAAQP,SAGlBgC,eAAeC,MAAOC,sBACZD,MAAME,UACP,gBACA,gBACExB,qBAAuBuB,wBAEzB,cACA,gBACEtB,wBAA0BsB,iBAM/BA,+BACGd,sBAIDgB,YAAcH,MAAMI,cACtB7B,KAAKU,WAAakB,aAAe5B,KAAKU,SAASS,SAASS,mBAIvDX,qBAGPZ,sCACeyB,GAAG9B,KAAKU,SAAU9B,oBAtJL,6BAsJiD,IAAMoB,KAAKkB,+BACzEY,GAAG9B,KAAKU,SAAU7B,iBAAiB4C,OAASzB,KAAKwB,eAAeC,OAAO,2BACvEK,GAAG9B,KAAKU,SAAU5B,gBAAgB2C,OAASzB,KAAKwB,eAAeC,OAAO,2BACtEK,GAAG9B,KAAKU,SAAU3B,eAAe0C,OAASzB,KAAKwB,eAAeC,OAAO,2BACrEK,GAAG9B,KAAKU,SAAU1B,gBAAgByC,OAASzB,KAAKwB,eAAeC,OAAO,KAGrFb,gBACEmB,aAAa/B,KAAKE,eACbA,SAAW,4BAKKJ,eACdE,KAAKgC,MAAK,iBACTC,KAAOvC,MAAMwC,oBAAoBlC,KAAMF,WAEvB,iBAAXA,OAAqB,SACF,IAAjBmC,KAAKnC,cACR,IAAIqC,qCAA8BrC,aAG1CmC,KAAKnC,QAAQE,yCAaFN,oBAEJA"}