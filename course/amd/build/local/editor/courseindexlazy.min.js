define ("core_course/local/editor/courseindexlazy",["exports","core_course/editor","core/log","core/templates"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.stateReady=a.getWatchers=a.init=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}var f={courseindex:"#courseindex"},g=!1,h=function(a){var c;if(g){return!0}g=!0;document.querySelector("#nav-drawer").innerHTML="Loading course index...";f.courseindex=null!==(c=a.courseindex)&&void 0!==c?c:f.courseindex;b.default.registerComponent({name:"courseindex_lazyload",getWatchers:i,stateReady:j});return!0};a.init=h;var i=function(){return[]};a.getWatchers=i;var j=function(a){var b={sections:[],editmode:a.course.editmode};a.course.sectionlist.forEach(function(c){var d=a.section.get(c),e={title:d.title,visible:d.visible,id:c,cms:[]};d.cms.forEach(function(b){var c=a.cm.get(b);e.cms.push({name:c.name,visible:c.visible,id:b})});e.hascms=0!=e.cms.length;b.sections.push(e)});b.hassections=0!=b.sections.length;d.default.render("core_course/local/courseindex",b).then(function(a,b){document.querySelector(f.courseindex).innerHTML="";d.default.appendNodeContents(f.courseindex,a,b);return!0}).fail(function(a){c.default.error("Cannot load course index template");c.default.error(a)})};a.stateReady=j});
//# sourceMappingURL=courseindexlazy.min.js.map
