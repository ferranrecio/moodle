define ("core_course/local/editor/courseindexlazy",["exports","core_course/editor","core/log","core/templates"],function(a,b,c,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.readyState=a.getEventHandlers=a.init=void 0;b=e(b);c=e(c);d=e(d);function e(a){return a&&a.__esModule?a:{default:a}}var f={courseindex:"#courseindex"},g=!1,h=function(a){var c;if(g){return!0}g=!0;document.querySelector("#nav-drawer").innerHTML="Loading course index...";f.courseindex=null!==(c=a.courseindex)&&void 0!==c?c:f.courseindex;b.default.registerComponent({name:"courseindex_lazyload",getEventHandlers:i});return!0};a.init=h;var i=function(){return{state_loaded:j}};a.getEventHandlers=i;var j=function(a){var b=a.state,e={sections:[],editmode:b.course.editmode};b.course.sectionlist.forEach(function(a){var c=b.section.get(a),d={title:c.title,visible:c.visible,id:a,cms:[]};c.cms.forEach(function(a){var c=b.cm.get(a);d.cms.push({name:c.name,visible:c.visible,id:a})});d.hascms=0!=d.cms.length;e.sections.push(d)});e.hassections=0!=e.sections.length;d.default.render("core_course/local/courseindex",e).then(function(a,b){document.querySelector(f.courseindex).innerHTML="";d.default.appendNodeContents(f.courseindex,a,b);return!0}).fail(function(a){c.default.error("Cannot load course index template");c.default.error(a)})};a.readyState=j});
//# sourceMappingURL=courseindexlazy.min.js.map
