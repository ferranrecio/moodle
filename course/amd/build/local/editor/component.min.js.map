{"version":3,"sources":["../../../src/local/editor/component.js"],"names":["Component","reactive","selectors","target","newselectors","Error","setElement","addSelectors","create","registerComponent","element","document","getElementById","newselector","hasOwnProperty"],"mappings":"wdAwBMA,CAAAA,C,YAMF,WAAYC,CAAZ,CAAsB,WAElB,KAAKA,QAAL,CAAgBA,CAAhB,CAEA,KAAKC,SAAL,CAAiB,EACpB,C,6CASQC,C,CAAQC,C,CAAc,CAE3B,GAAID,CAAM,SAAV,CAA0B,CACtB,KAAME,CAAAA,KAAK,mEACd,CAGD,KAAKC,UAAL,CAAgBH,CAAhB,EAGA,GAAIC,CAAY,SAAhB,CAAgC,CAC5B,KAAKG,YAAL,CAAkBH,CAAlB,CACH,CAGD,KAAKI,MAAL,GAGA,KAAKP,QAAL,CAAcQ,iBAAd,CAAgC,IAAhC,EAEA,MAAO,KACV,C,8CAOUN,C,CAAQ,CAGf,GAAsB,QAAlB,QAAOA,CAAAA,CAAX,CAAgC,CAC5B,KAAKO,OAAL,CAAeC,QAAQ,CAACC,cAAT,CAAwBT,CAAxB,CAAf,CACA,GAAI,CAAC,KAAKO,OAAV,CAAmB,CACf,KAAML,CAAAA,KAAK,mBAAYF,CAAZ,uBACd,CACJ,CALD,IAKO,CACH,KAAKO,OAAL,CAAeP,CAClB,CACJ,C,+CAOY,CACT,MAAO,MAAKO,OACf,C,kDAOYN,C,CAAc,CACvB,IAAK,GAAMS,CAAAA,CAAX,GAA0BT,CAAAA,CAA1B,CAAwC,CACpC,GAAIA,CAAY,CAACU,cAAb,CAA4BD,CAA5B,GAAiF,QAArC,QAAOT,CAAAA,CAAY,CAACS,CAAD,CAAnE,CAA+F,CAC3F,KAAKX,SAAL,CAAeE,CAAf,EAA+BA,CAAY,CAACS,CAAD,CAC9C,CACJ,CACJ,C,uCAQQ,CAER,C,iDAWa,CACV,MAAO,EACV,C,+CAKY,CAEZ,C,0BAGUb,C","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Reactive UI component base class.\n *\n * @module     core_course/local/editor/component\n * @package    core_course\n * @copyright  2020 Ferran Recio <ferran@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nclass Component {\n\n    /**\n     * The class constructor.\n     * @param {reactive} reactive the reactive module to register the component and execute mutations\n     */\n    constructor(reactive) {\n        // Optional component name.\n        this.reactive = reactive;\n        // Empty default component selectors.\n        this.selectors = {};\n    }\n\n    /**\n     * Initialize the component.\n     *\n     * @param {element|string} target the component DOM root element or its ID\n     * @param {object} newselectors optional selectors overrides\n     * @returns {Component}\n     */\n    register(target, newselectors) {\n\n        if (target === undefined) {\n            throw Error(`Reactive components needs a main DOM element to dispatch events`);\n        }\n\n        // Save DOM element.\n        this.setElement(target);\n\n        // Overwrite the components selectors if necessary.\n        if (newselectors !== undefined) {\n            this.addSelectors(newselectors);\n        }\n\n        // Call create function.\n        this.create();\n\n        // Register the component.\n        this.reactive.registerComponent(this);\n\n        return this;\n    }\n\n    /**\n     * Update the current component target.\n     *\n     * @param {element|string} target the component DOM root element or its ID\n     */\n    setElement(target) {\n        // The target can be a string selector if it is called from a mustache file\n        // or a HTML element in case the component is created directly from JS.\n        if (typeof target === 'string') {\n            this.element = document.getElementById(target);\n            if (!this.element) {\n                throw Error(`Element ${target} not found in page`);\n            }\n        } else {\n            this.element = target;\n        }\n    }\n\n    /**\n     * Get the main DOM element of ths component.\n     *\n     * @returns {element} the DOM element\n     */\n    getElement() {\n        return this.element;\n    }\n\n    /**\n     * Add or update the component selectors.\n     *\n     * @param {object} newselectors an object of new selectors.\n     */\n    addSelectors(newselectors) {\n        for (const newselector in newselectors) {\n            if (newselectors.hasOwnProperty(newselector) && typeof newselectors[newselector] !== 'string') {\n                this.selectors[newselectors] = newselectors[newselector];\n            }\n        }\n    }\n\n    /**\n     * Component create function.\n     *\n     * Default init method will call create when all internal attributes but\n     * the component is not yet registered in the reactive module.\n     */\n    create() {\n        // Components can override this method.\n    }\n\n    /**\n     * Return the list of watchers that component has.\n     *\n     * Each watcher is represented by an object with two attributes:\n     * - watch (string) the specific state event to watch. Example 'section.visible:updated'\n     * - handler (function) the function to call when the watching state change happens\n     *\n     * @returns {array} array of watchers.\n     */\n    getWatchers() {\n        return [];\n    }\n\n    /**\n     * Reactive module will call this method when the state is ready.\n     */\n    stateReady() {\n        // Components can override this method.\n    }\n}\n\nexport default Component;\n"],"file":"component.min.js"}